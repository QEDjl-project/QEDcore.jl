<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Particles and Phase Space Points · QEDcore.jl</title><meta name="title" content="Particles and Phase Space Points · QEDcore.jl"/><meta property="og:title" content="Particles and Phase Space Points · QEDcore.jl"/><meta property="twitter:title" content="Particles and Phase Space Points · QEDcore.jl"/><meta name="description" content="Documentation for QEDcore.jl."/><meta property="og:description" content="Documentation for QEDcore.jl."/><meta property="twitter:description" content="Documentation for QEDcore.jl."/><meta property="og:url" content="https://qedjl-project.gitlab.io/QEDcore.jl/generated/particles/"/><meta property="twitter:url" content="https://qedjl-project.gitlab.io/QEDcore.jl/generated/particles/"/><link rel="canonical" href="https://qedjl-project.gitlab.io/QEDcore.jl/generated/particles/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">QEDcore.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Particles and Phase Space Points</a><ul class="internal"><li><a class="tocitem" href="#Particle-Types"><span>Particle Types</span></a></li><li><a class="tocitem" href="#ParticleStateful"><span>ParticleStateful</span></a></li><li><a class="tocitem" href="#Phase-Space-Points"><span>Phase Space Points</span></a></li><li><a class="tocitem" href="#In/Out-Phase-Space-Points"><span>In/Out Phase Space Points</span></a></li></ul></li><li><a class="tocitem" href="../vectors/">Matrix and Vector Types</a></li></ul></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="../../library/outline/">Contents</a></li><li><a class="tocitem" href="../../library/particles/">Particles</a></li><li><a class="tocitem" href="../../library/coordinates/">Coordinates</a></li><li><a class="tocitem" href="../../library/phase_space_layout/">Phase Space Layout</a></li><li><a class="tocitem" href="../../library/phasespacepoint/">Phase Space Points</a></li><li><a class="tocitem" href="../../library/vectors/">Vector Types</a></li><li><a class="tocitem" href="../../library/lorentzboosts/">Lorentz Boosts</a></li><li><a class="tocitem" href="../../library/">Index</a></li></ul></li><li><a class="tocitem" href="../../refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Particles and Phase Space Points</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Particles and Phase Space Points</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/QEDjl-project/QEDcore.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/QEDjl-project/QEDcore.jl/blob/dev/docs/src/tutorial/particles.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Particles-and-Phase-Space-Points"><a class="docs-heading-anchor" href="#Particles-and-Phase-Space-Points">Particles and Phase Space Points</a><a id="Particles-and-Phase-Space-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Particles-and-Phase-Space-Points" title="Permalink"></a></h1><p>There are three layers of abstraction from particles to phase space points in the QEDjl project:</p><ul><li><a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/particles/#QEDbase.AbstractParticleType"><code>QEDbase.AbstractParticleType</code></a>: Base type for singleton particle type definitions. We also call these <em>species</em>.</li><li><a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.AbstractParticleStateful"><code>QEDbase.AbstractParticleStateful</code></a>: Base type for particles with a direction and carrying a momentum.</li><li><a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.AbstractPhaseSpacePoint"><code>QEDbase.AbstractPhaseSpacePoint</code></a>: Representation of a point in the phase space for a combination of an <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.AbstractProcessDefinition"><code>QEDbase.AbstractProcessDefinition</code></a>, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/model/#QEDbase.AbstractModelDefinition"><code>QEDbase.AbstractModelDefinition</code></a>, and <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space_layout/#QEDbase.AbstractPhaseSpaceLayout"><code>QEDbase.AbstractPhaseSpaceLayout</code></a>.</li></ul><p>This manual is intended to showcase the basic usage of these types and their implementations in QEDcore.</p><pre><code class="language-julia hljs">using QEDcore</code></pre><p>To use concrete process definitions, models and phase-space layouts, we use the <code>QEDbase.Mocks</code> module</p><pre><code class="language-julia hljs">using QEDbase.Mocks</code></pre><h2 id="Particle-Types"><a class="docs-heading-anchor" href="#Particle-Types">Particle Types</a><a id="Particle-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Particle-Types" title="Permalink"></a></h2><p>QEDcore currently defines the three basic particle types of QED, <a href="../../library/particles/#QEDcore.Electron"><code>Electron</code></a>, <a href="../../library/particles/#QEDcore.Positron"><code>Positron</code></a>, and <a href="../../library/particles/#QEDcore.Photon"><code>Photon</code></a>, and a type hierarchy for them:</p><pre><code class="language-julia hljs">@assert Photon &lt;: MajoranaBoson
@assert Electron &lt;: Fermion
@assert Positron &lt;: AntiFermion</code></pre><p>All of these are subtypes of <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/particles/#QEDbase.AbstractParticleType"><code>QEDbase.AbstractParticleType</code></a>. There are also convenience functions in Julia convention:</p><pre><code class="language-julia hljs">@assert is_boson(Photon())
@assert is_particle(Electron())
@assert is_anti_particle(Positron())

@assert !is_boson(Electron())
@assert !is_anti_particle(Electron())
@assert !is_fermion(Photon())</code></pre><p>These functions are part of QEDbase.jl&#39;s <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/particles/#Particle-Interface">particle interface</a>.</p><h2 id="ParticleStateful"><a class="docs-heading-anchor" href="#ParticleStateful">ParticleStateful</a><a id="ParticleStateful-1"></a><a class="docs-heading-anchor-permalink" href="#ParticleStateful" title="Permalink"></a></h2><p><a href="#ParticleStateful"><code>ParticleStateful</code></a> is the implementation of QEDbase&#39;s <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.AbstractParticleStateful"><code>QEDbase.AbstractParticleStateful</code></a> interface. It represents a particle with a <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.ParticleDirection"><code>direction</code></a> (as used in the context of scattering processes, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.Incoming"><code>QEDbase.Incoming</code></a>, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.Outgoing"><code>QEDbase.Outgoing</code></a>, or <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.UnknownDirection"><code>QEDbase.UnknownDirection</code></a>), a particle species (<a href="../../library/particles/#QEDcore.Electron"><code>Electron</code></a>, <a href="../../library/particles/#QEDcore.Positron"><code>Positron</code></a>, <a href="../../library/particles/#QEDcore.Photon"><code>Photon</code></a>, ...), and a 4-momentum vector.</p><pre><code class="language-julia hljs">ps = ParticleStateful(Incoming(), Electron(), rand(SFourMomentum))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ParticleStateful: incoming electron
    momentum: [0.6464406830541549, 0.8193961512956086, 0.7740616089715263, 0.01060514344601593]
</code></pre><p>The relevant accessor functions for the interface are implemented:</p><pre><code class="language-julia hljs">particle_direction(ps)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">incoming</code></pre><pre><code class="language-julia hljs">particle_species(ps)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">electron</code></pre><pre><code class="language-julia hljs">momentum(ps)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element SFourMomentum with indices SOneTo(4):
 0.6464406830541549
 0.8193961512956086
 0.7740616089715263
 0.01060514344601593</code></pre><h2 id="Phase-Space-Points"><a class="docs-heading-anchor" href="#Phase-Space-Points">Phase Space Points</a><a id="Phase-Space-Points-1"></a><a class="docs-heading-anchor-permalink" href="#Phase-Space-Points" title="Permalink"></a></h2><p>A <a href="../../library/phasespacepoint/#QEDcore.PhaseSpacePoint"><code>PhaseSpacePoint</code></a> is the combination of incoming and outgoing <a href="#ParticleStateful"><code>ParticleStateful</code></a>s. It also contains information about the <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/process/#QEDbase.AbstractProcessDefinition">scattering process</a>, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/model/#QEDbase.AbstractModelDefinition">model</a>, and <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space_layout/#QEDbase.AbstractPhaseSpaceLayout">phase space</a> that it is created for.</p><h3 id="Constructors"><a class="docs-heading-anchor" href="#Constructors">Constructors</a><a id="Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors" title="Permalink"></a></h3><pre><code class="language-julia hljs">psp = PhaseSpacePoint(
    MockProcess(                    # scattering process
        (MockFermion(), MockBoson()),
        (MockFermion(), MockBoson()),
    ),
    MockModel(),                    # physics model
    MockOutPhaseSpaceLayout(        # layout for outgoing phase space
        MockInPhaseSpaceLayout{     # layout for incoming phase space
            MockMomentum,            # momentum type
        }(),
    ),
    (   # momenta of the incoming particles
        rand(MockMomentum),
        rand(MockMomentum),
    ),
    (   # momenta of the outgoing particles
        rand(MockMomentum),
        rand(MockMomentum),
    ),
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">PhaseSpacePoint:
    process: mock process (2 -&gt; 2)
    model: mock model
    phase space layout: mock out phase space layout
    incoming particles:
     -&gt; incoming mock fermion: [0.09563948167142955, 0.42864579294087646, 0.455680800059881, 0.520382299907224]
     -&gt; incoming mock boson: [0.5923770484604224, 0.32401711832121605, 0.9733824472546124, 0.009435052141169131]
    outgoing particles:
     -&gt; outgoing mock fermion: [0.7780280890546212, 0.3366271576874932, 0.7502014356772276, 0.7869514778944782]
     -&gt; outgoing mock boson: [0.773052589932915, 0.8084328649597543, 0.02929796149833741, 0.7176737981243066]
</code></pre><p>This version of the constructor automatically creates <a href="#ParticleStateful"><code>ParticleStateful</code></a> obejcts from the momenta, matching the particles of the process. In the case of our example process, this is means an incoming mock fermion and mock boson, and outgoing mock fermion and mock boson.</p><p>Automatic checks make sure that the number of 4-momenta given matches the necessary number of 4-momenta for the process (this adds 0 overhead at runtime because it is inferred from type information alone).</p><pre><code class="language-julia hljs">    PhaseSpacePoint(
        MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
        MockModel(),
        MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
        (rand(MockMomentum),), # incorrect number of incoming momenta, should be 2
        (rand(MockMomentum), rand(MockMomentum)),
    )</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Error: InvalidInputError(&quot;expected 2 incoming particles for the process but got 1&quot;)
└ @ Main particles.md:131</code></pre><p>Alternatively, a <a href="../../library/phasespacepoint/#QEDcore.PhaseSpacePoint"><code>PhaseSpacePoint</code></a> can also be constructed from already existing <a href="#ParticleStateful"><code>ParticleStateful</code></a> objects.</p><pre><code class="language-julia hljs">psp = PhaseSpacePoint(
    MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
    MockModel(),
    MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
    (   # incoming particles
        ParticleStateful(Incoming(), MockFermion(), rand(MockMomentum)),
        ParticleStateful(Incoming(), MockBoson(), rand(MockMomentum)),
    ),
    (   # outgoing particles
        ParticleStateful(Outgoing(), MockFermion(), rand(MockMomentum)),
        ParticleStateful(Outgoing(), MockBoson(), rand(MockMomentum)),
    ),
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">PhaseSpacePoint:
    process: mock process (2 -&gt; 2)
    model: mock model
    phase space layout: mock out phase space layout
    incoming particles:
     -&gt; incoming mock fermion: [0.5850964486769963, 0.6425735382362623, 0.31702421837021477, 0.5556905491491175]
     -&gt; incoming mock boson: [0.1457764676208071, 0.18042716154478866, 0.23655591238631013, 0.14029033450020068]
    outgoing particles:
     -&gt; outgoing mock fermion: [0.49158568116028534, 0.4979710089456201, 0.1380435634591357, 0.24564297277571778]
     -&gt; outgoing mock boson: [0.9809120990643323, 0.9939621968211717, 0.41234975103016147, 0.12736587644802178]
</code></pre><p>Similar to the constructor from momenta, this checks that the given <a href="#ParticleStateful"><code>ParticleStateful</code></a>s fit to the given process and throws otherwise. Again, since this can be infered from type information alone, it adds no overhead.</p><pre><code class="language-julia hljs">    PhaseSpacePoint(
        MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
        MockModel(),
        MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
        (   # incoming particles
            ParticleStateful(Incoming(), MockBoson(), rand(MockMomentum)), # wrong particle type
            ParticleStateful(Incoming(), MockBoson(), rand(MockMomentum)),
        ),
        (   # outgoing particles
            ParticleStateful(Outgoing(), MockFermion(), rand(MockMomentum)),
            ParticleStateful(Outgoing(), MockBoson(), rand(MockMomentum)),
        ),
    )</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Error: InvalidInputError(&quot;expected incoming mock fermion but got incoming mock boson&quot;)
└ @ Main particles.md:178</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>While these constructors check that the given types make sense and work together, they do <em>not</em> check whether the given momenta make a physical phase space point or that the incoming or outgoing particles have on-shell 4-momenta.</p></div></div><h3 id="Accessors"><a class="docs-heading-anchor" href="#Accessors">Accessors</a><a id="Accessors-1"></a><a class="docs-heading-anchor-permalink" href="#Accessors" title="Permalink"></a></h3><p>The phase space point provides some convenient accessors to the stateful particles within:</p><pre><code class="language-julia hljs">psp[Incoming(), 1]  # the first incoming particle</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ParticleStateful: incoming mock fermion
    momentum: [0.5850964486769963, 0.6425735382362623, 0.31702421837021477, 0.5556905491491175]
</code></pre><pre><code class="language-julia hljs">psp[Outgoing(), 2]  # the second outgoing particle</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ParticleStateful: outgoing mock boson
    momentum: [0.9809120990643323, 0.9939621968211717, 0.41234975103016147, 0.12736587644802178]
</code></pre><pre><code class="language-julia hljs">particles(psp, Incoming()) # all incoming particles as a tuple</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(incoming mock fermion: [0.5850964486769963, 0.6425735382362623, 0.31702421837021477, 0.5556905491491175], incoming mock boson: [0.1457764676208071, 0.18042716154478866, 0.23655591238631013, 0.14029033450020068])</code></pre><p>Momentum accessors:</p><pre><code class="language-julia hljs">momentum(psp, Incoming(), MockFermion(), 1) # the momentum of the first incoming electron</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element QEDbase.Mocks.MockMomentum{Float64} with indices SOneTo(4):
 0.5850964486769963
 0.6425735382362623
 0.31702421837021477
 0.5556905491491175</code></pre><p>When only one particle of the species exists in the particle set, the 1 can be ommitted for convenience.</p><pre><code class="language-julia hljs">@assert ans == momentum(psp, Incoming(), MockFermion())</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This method throws when multiple (or zero) particles of the given direction and species exist in the phase space point.</p></div></div><p>When the index of the required momentum is known at compile time, a <code>Val(N)</code> can be used instead of <code>N</code>. This performs bounds checks at compile time and removes loops from the runtime execution</p><pre><code class="language-julia hljs">using BenchmarkTools
judge(
    median(@benchmark momentum($psp, Incoming(), MockBoson(), Val(1))),
    median(@benchmark momentum($psp, Incoming(), MockBoson(), 1)),
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">BenchmarkTools.TrialJudgement: 
  time:   -89.27% =&gt; <span class="sgr32">improvement</span> (5.00% tolerance)
  memory: -100.00% =&gt; <span class="sgr32">improvement</span> (1.00% tolerance)
</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This is only faster when <code>N</code> is actually known at compile time, for example when it is a literal integer or a function&#39;s type parameter. For dynamic values of <code>N</code>, prefer the <code>Int</code> variant or in case of loops, directly loop over the tuple of <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.momenta"><code>momenta</code></a>.</p></div></div><p>Some more overloads for the momentum function exist, for a complete list please refer to its documentation: <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.momentum"><code>QEDbase.momentum</code></a>, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.momenta"><code>QEDbase.momenta</code></a>.</p><p>Finally, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.process"><code>process</code></a>, <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.model"><code>model</code></a>, and <a href="https://qedjl-project.github.io/QEDbase.jl/dev/library/phase_space/#QEDbase.phase_space_layout"><code>phase_space_layout</code></a> can be used to request the object in question:</p><pre><code class="language-julia hljs">process(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">mock process (2 -&gt; 2)</code></pre><pre><code class="language-julia hljs">model(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">mock model</code></pre><pre><code class="language-julia hljs">phase_space_layout(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">mock out phase space layout</code></pre><h2 id="In/Out-Phase-Space-Points"><a class="docs-heading-anchor" href="#In/Out-Phase-Space-Points">In/Out Phase Space Points</a><a id="In/Out-Phase-Space-Points-1"></a><a class="docs-heading-anchor-permalink" href="#In/Out-Phase-Space-Points" title="Permalink"></a></h2><p>As a special case, phase space points are allowed to only contain the incoming or outgoing particle momenta. These types can be helpful for overloading some functions that don&#39;t require the entire phase space point to exist.</p><pre><code class="language-julia hljs">function in_sum(in_psp::AbstractInPhaseSpacePoint)
    return sum(momenta(in_psp, Incoming()))
end

psp = InPhaseSpacePoint(
    MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
    MockModel(),
    MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
    (rand(MockMomentum), rand(MockMomentum)),
)

in_sum(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element QEDbase.Mocks.MockMomentum{Float64} with indices SOneTo(4):
 1.4062229772033525
 0.141279502890591
 0.06073708610040207
 1.3870371850777827</code></pre><p>Every full <a href="../../library/phasespacepoint/#QEDcore.PhaseSpacePoint"><code>PhaseSpacePoint</code></a> is both an <a href="../../library/phasespacepoint/#QEDcore.InPhaseSpacePoint"><code>InPhaseSpacePoint</code></a> and an <a href="../../library/phasespacepoint/#QEDcore.OutPhaseSpacePoint"><code>OutPhaseSpacePoint</code></a>, too. For example, the <code>in_sum</code> function defined above still works with a full <a href="../../library/phasespacepoint/#QEDcore.PhaseSpacePoint"><code>PhaseSpacePoint</code></a>:</p><pre><code class="language-julia hljs">psp = PhaseSpacePoint(
    MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
    MockModel(),
    MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
    (rand(MockMomentum), rand(MockMomentum)),
    (rand(MockMomentum), rand(MockMomentum)),
)

in_sum(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element QEDbase.Mocks.MockMomentum{Float64} with indices SOneTo(4):
 1.2413962308845559
 1.13362551906157
 0.9472375557895159
 1.4259483510705866</code></pre><p>But an <a href="../../library/phasespacepoint/#QEDcore.InPhaseSpacePoint"><code>InPhaseSpacePoint</code></a> is not an <a href="../../library/phasespacepoint/#QEDcore.OutPhaseSpacePoint"><code>OutPhaseSpacePoint</code></a> and vice versa. We cannot call <code>in_sum</code> on an <a href="../../library/phasespacepoint/#QEDcore.OutPhaseSpacePoint"><code>OutPhaseSpacePoint</code></a>:</p><pre><code class="language-julia hljs">psp = OutPhaseSpacePoint(
    MockProcess((MockFermion(), MockBoson()), (MockFermion(), MockBoson())),
    MockModel(),
    MockOutPhaseSpaceLayout(MockInPhaseSpaceLayout{MockMomentum}()),
    (rand(MockMomentum), rand(MockMomentum)),
)

    in_sum(psp)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Error: MethodError(Main.in_sum, (PhaseSpacePoint of mock process (2 -&gt; 2),), 0x0000000000007b79)
└ @ Main particles.md:307</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../vectors/">Matrix and Vector Types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 25 February 2025 00:10">Tuesday 25 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
